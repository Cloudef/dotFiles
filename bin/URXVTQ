#!/bin/sh
# Urxvt quake console

wid="$(xdotool search --classname URxvtq 2>&1 | head -1)"
if [[ "$wid" == *BadWindow* ]]; then
   exit
fi
if [ ! "$wid" ]; then
  URXVTC -name URxvtq -geometry 240x26+0+137
  wid="$(xdotool search --classname URxvtq | head -1)"
  xdotool windowfocus $wid
  sleep 1 && transset-df --no-regex -n URxvtq --dec 0.1
else
  visible="$(xdotool search --onlyvisible --classname URxvtq 2>/dev/null)"
  if [ ! "$visible" ]; then
    xdotool windowmap $wid
    xdotool windowfocus $wid
    xdotool windowraise $wid
  else
    xdotool windowunmap $wid
  fi
fi
